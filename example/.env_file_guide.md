# .env 文件配置指南

## 1. 创建 .env 文件

在你的项目根目录创建以下文件：

### .env (默认环境)
```env
# 默认环境配置
HTTP_BASE_URL=https://api.example.com
GRAPHQL_ENDPOINT=https://graphql.example.com/graphql
API_KEY=default_key
DEBUG=true
LOG_LEVEL=info
```

### .env.dev 或 .env.development (开发环境)
```env
# 开发环境配置
HTTP_BASE_URL=https://dev-api.example.com
GRAPHQL_ENDPOINT=https://dev-graphql.example.com/graphql
API_KEY=dev_key_123456
DEBUG=true
LOG_LEVEL=verbose
TIMEOUT=30000
```

### .env.prod 或 .env.production (生产环境)
```env
# 生产环境配置
HTTP_BASE_URL=https://api.example.com
GRAPHQL_ENDPOINT=https://graphql.example.com/graphql
API_KEY=prod_key_345678
DEBUG=false
LOG_LEVEL=error
TIMEOUT=15000
```

### .env.staging (测试环境)
```env
# 测试环境配置
HTTP_BASE_URL=https://staging-api.example.com
GRAPHQL_ENDPOINT=https://staging-graphql.example.com/graphql
API_KEY=staging_key_789012
DEBUG=true
LOG_LEVEL=info
TIMEOUT=20000
```

## 2. 配置 pubspec.yaml

将 .env 文件添加到 assets：

```yaml
flutter:
  assets:
    - .env
    - .env.dev
    - .env.prod
    - .env.staging
    # 如果有其他 .env 文件也要添加
```

## 3. 在代码中初始化

```dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // 初始化环境管理器，自动加载 .env 文件
  await EnvironmentManager.instance.initialize(
    loadFromEnvFiles: true,  // 启用从 .env 文件加载
    defaultEnvironment: 'Development',  // 默认环境
  );
  
  // 然后初始化 DevPanel
  await FlutterDevPanel.init(
    () => runApp(const MyApp()),
    config: const DevPanelConfig(
      triggerModes: {TriggerMode.fab, TriggerMode.shake},
    ),
    modules: [
      // ... 你的模块
    ],
  );
}
```

## 4. 支持的文件名

插件会自动查找以下文件：
- `.env` -> 映射为 "Default" 环境
- `.env.dev` 或 `.env.development` -> 映射为 "Development" 环境
- `.env.prod` 或 `.env.production` -> 映射为 "Production" 环境
- `.env.test` -> 映射为 "Test" 环境
- `.env.staging` -> 映射为 "Staging" 环境
- `.env.local` -> 映射为 "Local" 环境（用于本地覆盖，建议加入 .gitignore）

## 5. 注意事项

1. **文件位置**: .env 文件应放在项目根目录
2. **Assets 声明**: 必须在 pubspec.yaml 中声明为 assets
3. **格式要求**: 使用 KEY=VALUE 格式，每行一个
4. **注释支持**: 支持 # 开头的注释行
5. **类型转换**: 值会自动转换为合适的类型（bool、int、double、string）

## 6. .gitignore 建议

```gitignore
# 不要提交包含敏感信息的环境文件
.env.local
.env.*.local

# 可以提交模板文件
# .env.example
```